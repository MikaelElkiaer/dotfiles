#!/usr/bin/env bash

set -Eeuo pipefail

OUTPUT=""
for f in ~/.local/state/logged-in-*; do
  STATUS=$(cat "$f")
  if [ "$STATUS" -eq 1 ]; then
    PROVIDER=$(basename "$f" | sed 's/logged-in-//')
    # echo -n " #[fg=blue]#[fg=default] $PROVIDER"
    OUTPUT+=" #[fg=blue]${PROVIDER}#[fg=default]"
  elif [ "$STATUS" -eq 0 ]; then
    PROVIDER=$(basename "$f" | sed 's/logged-in-//')
    # echo -n " #[fg=yellow]#[fg=default] $PROVIDER"
    OUTPUT+=" #[fg=yellow]${PROVIDER}#[fg=default]"
  fi
done

echo "$OUTPUT"
