#!/usr/bin/env bash

set -Eeuo pipefail

OUTPUT="ï€£"
for f in ~/.local/state/logged-in-*; do
  [ -e "$f" ] || continue
  STATUS=$(cat "$f")
  if [ "$STATUS" -eq 1 ]; then
    PROVIDER=$(basename "$f" | sed 's/logged-in-//')
    OUTPUT+=" #[fg=green]${PROVIDER}#[fg=default]"
  elif [ "$STATUS" -eq 0 ]; then
    PROVIDER=$(basename "$f" | sed 's/logged-in-//')
    OUTPUT+=" #[fg=red]${PROVIDER}#[fg=default]"
  fi
done

echo "$OUTPUT"
